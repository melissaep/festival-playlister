<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Lil Thang</title>
</head>
<body>



<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
<script>

	var echoNest = [];
	var artistsPlusID = {};
	var echoNestKey = 'SO5PRLOHX9IBY34FA';
	var echoNestURL = 'http://developer.echonest.com/api/v4/artist/search?';

	artists = [
	'red+hot+chili+peppers', 
	'lana+del+rey', 
	'radiohead', 
	'disclosure', 
	'the+lumineers', 
	'grimes', 
	'flume', 
	'bastille', 
	'passenger', 
	'walk+the+moon', 
	'leon+bridges', 
	'bloc+party', 
	'paul+kalkbrenner', 
	'mac+miller', 
	'cypress+hill', 
	'silversun+pickups', 
	'the+cat+empire', 
	'kaytranada', 
	'todd+terje+the+olsens', 
	'daughter'
	]

	artists2 = [
	'the+barr+brothers', 
	'logic', 
	'boys+noize', 
	'elle+king', 
	'years+years', 
	'gramatik', 
	'july+talk', 
	'jazz+cartier', 
	'st+lucia', 
	'dragonette', 
	'laplsey', 
	'melanie+martinez', 
	'skepta', 
	'post+malone', 
	'the+paper+kites', 
	'evian+christ', 
	'lane+8', 
	'the+strumbellas', 
	'the+underachievers', 
	'frightened+rabbit'
	]

	artists3 = [
	'snakehips', 
	'jack+garratt', 
	'mura+masa', 
	'goldlink', 
	'boris+brejcha', 
	'frances', 
	'rufus+du+sol', 
	'fakear', 
	'misterwives', 
	'the+struts', 
	'classixx', 
	'sonreal', 
	'the+wombats', 
	'hiatus+kaiyote', 
	'jeremy+loops', 
	'hi+lo', 
	'charlotte+cardin', 
	'little+simz', 
	'synapson', 
	'nothing+but+theives'
	]

	artists4 = [
	'the+range', 
	'cloves', 
	'night+riots', 
	'jahkoy', 
	'foy+vance', 
	'le+matos', 
	'haelos', 
	'feder', 
	'alex+g', 
	'busty+and+the+bass', 
	'caveboy', 
	'elephant+stone', 
	'haute', 
	'israel+nash', 
	'noe'
	]


	echoNest.getArtistId = function(artistName){
			return $.ajax({
				url: echoNestURL,
				method: 'GET',
				dataType: 'json',
				data: {
					api_key: echoNestKey,
					name: artistName,
					format: 'json',
				},
			});
		};

	var apiData = [];
	var artistData = [];
	var firstArtistData = [];

	echoNest.init = function(arrayName){
		for (i = 0; i < artists.length; i = i + 1) {
			apiData.push(echoNest.getArtistId(arrayName[i]));
		};
		console.log(apiData);

			// Filter down API data to information needed (songs)
		$.when.apply(null, apiData).then(function() {
			artistData = Array.prototype.slice.apply(arguments);
			console.log(artistData);
			artistData = artistData.map(function(value){
				return value[0].response.artists;
			});
			console.log(artistData);
			firstArtistData = artistData.map(function(value){
				return value[0];
			});
			console.log(firstArtistData);
			echoNest.postArtistInfo(firstArtistData);
		});


	};

	echoNest.postArtistInfo = function(data){
			// console.log(data);
			$.each(data, function(){
				console.log(this);
				var artistName = this.name;
				$('body').append('<p>Artist Name: ' + artistName + '</p>');
				var artistID = this.id;
				$('body').append('<p>Artist ID: ' + artistID + '</p>');
			});

		};

</script>
</body>
</html>